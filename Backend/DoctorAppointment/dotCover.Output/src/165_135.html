<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\oencut\Personal\Doctor-Appointment\Backend\DoctorAppointment\DoctorAppointments.DataAccess\Persistence\Migrations\20221213130947_Add_Config_For_User_Doctor_And_Pacient.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using Microsoft.EntityFrameworkCore.Migrations;

#nullable disable

#pragma warning disable CA1814 // Prefer jagged arrays over multidimensional

namespace DoctorAppointments.DataAccess.Migrations
{
    /// &lt;inheritdoc /&gt;
    public partial class AddConfigForUserDoctorAndPacient : Migration
    {
        /// &lt;inheritdoc /&gt;
        protected override void Up(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.DropForeignKey(
                name: &quot;FK_MedicalFacilities_Appointments_AppointmentId&quot;,
                table: &quot;MedicalFacilities&quot;);

            migrationBuilder.DropTable(
                name: &quot;AppointmentPacient&quot;);

            migrationBuilder.DropIndex(
                name: &quot;IX_MedicalFacilities_AppointmentId&quot;,
                table: &quot;MedicalFacilities&quot;);

            migrationBuilder.DropColumn(
                name: &quot;AppointmentId&quot;,
                table: &quot;MedicalFacilities&quot;);

            migrationBuilder.AddColumn&lt;string&gt;(
                name: &quot;CNP&quot;,
                table: &quot;Pacients&quot;,
                type: &quot;text&quot;,
                nullable: false,
                defaultValue: &quot;&quot;);

            migrationBuilder.AddColumn&lt;string&gt;(
                name: &quot;CNP&quot;,
                table: &quot;Doctors&quot;,
                type: &quot;text&quot;,
                nullable: false,
                defaultValue: &quot;&quot;);

            migrationBuilder.AddColumn&lt;Guid&gt;(
                name: &quot;MedicalFacilityId&quot;,
                table: &quot;Appointments&quot;,
                type: &quot;uuid&quot;,
                nullable: false,
                defaultValue: new Guid(&quot;00000000-0000-0000-0000-000000000000&quot;));

            migrationBuilder.AddColumn&lt;Guid&gt;(
                name: &quot;PacientId&quot;,
                table: &quot;Appointments&quot;,
                type: &quot;uuid&quot;,
                nullable: false,
                defaultValue: new Guid(&quot;00000000-0000-0000-0000-000000000000&quot;));

            migrationBuilder.InsertData(
                table: &quot;Cities&quot;,
                columns: new[] { &quot;Id&quot;, &quot;Name&quot; },
                values: new object[,]
                {
                    { new Guid(&quot;1e3e68c8-5d30-4210-93fd-6eca28a5b012&quot;), &quot;Bucuresti&quot; },
                    { new Guid(&quot;37b677a1-229e-4df4-8c2a-694113d004ef&quot;), &quot;Galati&quot; },
                    { new Guid(&quot;9170514b-575f-4cdd-8fbe-d628919df13e&quot;), &quot;Constanta&quot; },
                    { new Guid(&quot;a91474ca-eeeb-4f96-9a43-54dab1dc961f&quot;), &quot;Vaslui&quot; },
                    { new Guid(&quot;aa0016c4-1540-4138-a2fe-eee4f3b2516c&quot;), &quot;Iasi&quot; }
                });

            migrationBuilder.InsertData(
                table: &quot;Specialties&quot;,
                columns: new[] { &quot;Id&quot;, &quot;Name&quot; },
                values: new object[,]
                {
                    { new Guid(&quot;20d8ed61-3b25-4b89-8724-bfff53dd8c43&quot;), &quot;Emergency medicine&quot; },
                    { new Guid(&quot;410ba8be-0848-4fc2-9e15-19d883c0f19f&quot;), &quot;Pediatrics&quot; },
                    { new Guid(&quot;b8cfaf4a-2be7-46b6-a30d-9156947623e9&quot;), &quot;Surgery&quot; },
                    { new Guid(&quot;ba9c9af3-a17a-4863-99d1-75892e6987ca&quot;), &quot;Dermatology&quot; },
                    { new Guid(&quot;d2147f37-b602-4a33-b29b-a5afbf844d4f&quot;), &quot;Family medicine&quot; },
                    { new Guid(&quot;f2bfd52b-cbdd-4f90-afc8-d6f2bf903ab6&quot;), &quot;Ophthalmology&quot; }
                });

            migrationBuilder.CreateIndex(
                name: &quot;IX_Users_Email&quot;,
                table: &quot;Users&quot;,
                column: &quot;Email&quot;,
                unique: true);

            migrationBuilder.CreateIndex(
                name: &quot;IX_Pacients_CNP&quot;,
                table: &quot;Pacients&quot;,
                column: &quot;CNP&quot;,
                unique: true);

            migrationBuilder.CreateIndex(
                name: &quot;IX_Doctors_CNP&quot;,
                table: &quot;Doctors&quot;,
                column: &quot;CNP&quot;,
                unique: true);

            migrationBuilder.CreateIndex(
                name: &quot;IX_Billings_AppointmentId&quot;,
                table: &quot;Billings&quot;,
                column: &quot;AppointmentId&quot;);

            migrationBuilder.CreateIndex(
                name: &quot;IX_Appointments_MedicalFacilityId&quot;,
                table: &quot;Appointments&quot;,
                column: &quot;MedicalFacilityId&quot;);

            migrationBuilder.CreateIndex(
                name: &quot;IX_Appointments_PacientId&quot;,
                table: &quot;Appointments&quot;,
                column: &quot;PacientId&quot;);

            migrationBuilder.AddForeignKey(
                name: &quot;FK_Appointments_MedicalFacilities_MedicalFacilityId&quot;,
                table: &quot;Appointments&quot;,
                column: &quot;MedicalFacilityId&quot;,
                principalTable: &quot;MedicalFacilities&quot;,
                principalColumn: &quot;Id&quot;,
                onDelete: ReferentialAction.Cascade);

            migrationBuilder.AddForeignKey(
                name: &quot;FK_Appointments_Pacients_PacientId&quot;,
                table: &quot;Appointments&quot;,
                column: &quot;PacientId&quot;,
                principalTable: &quot;Pacients&quot;,
                principalColumn: &quot;Id&quot;,
                onDelete: ReferentialAction.Cascade);

            migrationBuilder.AddForeignKey(
                name: &quot;FK_Billings_Appointments_AppointmentId&quot;,
                table: &quot;Billings&quot;,
                column: &quot;AppointmentId&quot;,
                principalTable: &quot;Appointments&quot;,
                principalColumn: &quot;Id&quot;,
                onDelete: ReferentialAction.Cascade);
        }

        /// &lt;inheritdoc /&gt;
        protected override void Down(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.DropForeignKey(
                name: &quot;FK_Appointments_MedicalFacilities_MedicalFacilityId&quot;,
                table: &quot;Appointments&quot;);

            migrationBuilder.DropForeignKey(
                name: &quot;FK_Appointments_Pacients_PacientId&quot;,
                table: &quot;Appointments&quot;);

            migrationBuilder.DropForeignKey(
                name: &quot;FK_Billings_Appointments_AppointmentId&quot;,
                table: &quot;Billings&quot;);

            migrationBuilder.DropIndex(
                name: &quot;IX_Users_Email&quot;,
                table: &quot;Users&quot;);

            migrationBuilder.DropIndex(
                name: &quot;IX_Pacients_CNP&quot;,
                table: &quot;Pacients&quot;);

            migrationBuilder.DropIndex(
                name: &quot;IX_Doctors_CNP&quot;,
                table: &quot;Doctors&quot;);

            migrationBuilder.DropIndex(
                name: &quot;IX_Billings_AppointmentId&quot;,
                table: &quot;Billings&quot;);

            migrationBuilder.DropIndex(
                name: &quot;IX_Appointments_MedicalFacilityId&quot;,
                table: &quot;Appointments&quot;);

            migrationBuilder.DropIndex(
                name: &quot;IX_Appointments_PacientId&quot;,
                table: &quot;Appointments&quot;);

            migrationBuilder.DeleteData(
                table: &quot;Cities&quot;,
                keyColumn: &quot;Id&quot;,
                keyValue: new Guid(&quot;1e3e68c8-5d30-4210-93fd-6eca28a5b012&quot;));

            migrationBuilder.DeleteData(
                table: &quot;Cities&quot;,
                keyColumn: &quot;Id&quot;,
                keyValue: new Guid(&quot;37b677a1-229e-4df4-8c2a-694113d004ef&quot;));

            migrationBuilder.DeleteData(
                table: &quot;Cities&quot;,
                keyColumn: &quot;Id&quot;,
                keyValue: new Guid(&quot;9170514b-575f-4cdd-8fbe-d628919df13e&quot;));

            migrationBuilder.DeleteData(
                table: &quot;Cities&quot;,
                keyColumn: &quot;Id&quot;,
                keyValue: new Guid(&quot;a91474ca-eeeb-4f96-9a43-54dab1dc961f&quot;));

            migrationBuilder.DeleteData(
                table: &quot;Cities&quot;,
                keyColumn: &quot;Id&quot;,
                keyValue: new Guid(&quot;aa0016c4-1540-4138-a2fe-eee4f3b2516c&quot;));

            migrationBuilder.DeleteData(
                table: &quot;Specialties&quot;,
                keyColumn: &quot;Id&quot;,
                keyValue: new Guid(&quot;20d8ed61-3b25-4b89-8724-bfff53dd8c43&quot;));

            migrationBuilder.DeleteData(
                table: &quot;Specialties&quot;,
                keyColumn: &quot;Id&quot;,
                keyValue: new Guid(&quot;410ba8be-0848-4fc2-9e15-19d883c0f19f&quot;));

            migrationBuilder.DeleteData(
                table: &quot;Specialties&quot;,
                keyColumn: &quot;Id&quot;,
                keyValue: new Guid(&quot;b8cfaf4a-2be7-46b6-a30d-9156947623e9&quot;));

            migrationBuilder.DeleteData(
                table: &quot;Specialties&quot;,
                keyColumn: &quot;Id&quot;,
                keyValue: new Guid(&quot;ba9c9af3-a17a-4863-99d1-75892e6987ca&quot;));

            migrationBuilder.DeleteData(
                table: &quot;Specialties&quot;,
                keyColumn: &quot;Id&quot;,
                keyValue: new Guid(&quot;d2147f37-b602-4a33-b29b-a5afbf844d4f&quot;));

            migrationBuilder.DeleteData(
                table: &quot;Specialties&quot;,
                keyColumn: &quot;Id&quot;,
                keyValue: new Guid(&quot;f2bfd52b-cbdd-4f90-afc8-d6f2bf903ab6&quot;));

            migrationBuilder.DropColumn(
                name: &quot;CNP&quot;,
                table: &quot;Pacients&quot;);

            migrationBuilder.DropColumn(
                name: &quot;CNP&quot;,
                table: &quot;Doctors&quot;);

            migrationBuilder.DropColumn(
                name: &quot;MedicalFacilityId&quot;,
                table: &quot;Appointments&quot;);

            migrationBuilder.DropColumn(
                name: &quot;PacientId&quot;,
                table: &quot;Appointments&quot;);

            migrationBuilder.AddColumn&lt;Guid&gt;(
                name: &quot;AppointmentId&quot;,
                table: &quot;MedicalFacilities&quot;,
                type: &quot;uuid&quot;,
                nullable: true);

            migrationBuilder.CreateTable(
                name: &quot;AppointmentPacient&quot;,
                columns: table =&gt; new
                {
                    AppointmentId = table.Column&lt;Guid&gt;(type: &quot;uuid&quot;, nullable: false),
                    PacientIdId = table.Column&lt;Guid&gt;(type: &quot;uuid&quot;, nullable: false)
                },
                constraints: table =&gt;
                {
                    table.PrimaryKey(&quot;PK_AppointmentPacient&quot;, x =&gt; new { x.AppointmentId, x.PacientIdId });
                    table.ForeignKey(
                        name: &quot;FK_AppointmentPacient_Appointments_AppointmentId&quot;,
                        column: x =&gt; x.AppointmentId,
                        principalTable: &quot;Appointments&quot;,
                        principalColumn: &quot;Id&quot;,
                        onDelete: ReferentialAction.Cascade);
                    table.ForeignKey(
                        name: &quot;FK_AppointmentPacient_Pacients_PacientIdId&quot;,
                        column: x =&gt; x.PacientIdId,
                        principalTable: &quot;Pacients&quot;,
                        principalColumn: &quot;Id&quot;,
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateIndex(
                name: &quot;IX_MedicalFacilities_AppointmentId&quot;,
                table: &quot;MedicalFacilities&quot;,
                column: &quot;AppointmentId&quot;);

            migrationBuilder.CreateIndex(
                name: &quot;IX_AppointmentPacient_PacientIdId&quot;,
                table: &quot;AppointmentPacient&quot;,
                column: &quot;PacientIdId&quot;);

            migrationBuilder.AddForeignKey(
                name: &quot;FK_MedicalFacilities_Appointments_AppointmentId&quot;,
                table: &quot;MedicalFacilities&quot;,
                column: &quot;AppointmentId&quot;,
                principalTable: &quot;Appointments&quot;,
                principalColumn: &quot;Id&quot;);
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[14,9,14,10,0],[15,13,17,45,0],[19,13,20,45,0],[22,13,24,45,0],[26,13,28,45,0],[30,13,35,35,0],[37,13,42,35,0],[44,13,49,81,0],[51,13,56,81,0],[58,13,68,20,0],[70,13,81,20,0],[83,13,87,31,0],[89,13,93,31,0],[95,13,99,31,0],[101,13,104,42,0],[106,13,109,46,0],[111,13,114,38,0],[116,13,122,54,0],[124,13,130,54,0],[132,13,138,54,0],[139,9,139,10,0],[143,9,143,10,0],[144,13,146,40,0],[148,13,150,40,0],[152,13,154,36,0],[156,13,158,33,0],[160,13,162,36,0],[164,13,166,35,0],[168,13,170,36,0],[172,13,174,40,0],[176,13,178,40,0],[180,13,183,77,0],[185,13,188,77,0],[190,13,193,77,0],[195,13,198,77,0],[200,13,203,77,0],[205,13,208,77,0],[210,13,213,77,0],[215,13,218,77,0],[220,13,223,77,0],[225,13,228,77,0],[230,13,233,77,0],[235,13,237,36,0],[239,13,241,35,0],[243,13,245,40,0],[247,13,249,40,0],[251,13,255,33,0],[257,13,259,35,0],[259,35,263,18,0],[263,18,265,17,0],[265,17,265,18,0],[265,18,266,21,0],[266,21,266,108,0],[266,108,267,21,0],[267,21,272,62,0],[272,62,273,21,0],[273,21,278,62,0],[278,62,279,17,0],[279,17,279,18,0],[279,18,279,20,0],[281,13,284,42,0],[286,13,289,40,0],[291,13,296,40,0],[297,9,297,10,0]]);
    </script>
  </body>
</html>